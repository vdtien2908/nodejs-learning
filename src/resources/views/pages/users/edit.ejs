<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="/user">Người dùng</a></li>
        <li class="breadcrumb-item active" aria-current="page">
            Cập nhật người dùng
        </li>
    </ol>
</nav>
<div class="form-content shadow" style="padding: 20px">
    <h6 class="font-weight-bold text-primary">Cập nhật người dùng</h6>

    <form class="needs-validation form-main" novalidate method="post" action="/user/<%= user.id %>/edit"
        oninput='password_r.setCustomValidity(password_r.value != password.value ? "Mật khẩu không khớp" : "")'>
        <div class="form-group">
            <label class="required" for="fullname">Họ và tên</label>
            <input value="<%=user.full_name %>" type="text" name="full_name" class="form-control" id="fullname"
                placeholder="Nhập họ và tên" required />
            <div class="ml-2 invalid-feedback">Vui lòng nhập tên!</div>
        </div>
        <div class="form-group">
            <label class="required" for="email">Email</label>
            <input value="<%=user.email %>" type="text" name="email" class="form-control" id="email"
                placeholder="Nhập email" required />
            <div class="ml-2 invalid-feedback">Vui lòng nhập email!</div>
        </div>
        <div class="form-group">
            <label class="required" for="sex">Giới tính</label>
            <select class="form-control" name="sex" id="sex" required>
                <option value="">Chọn giới tính</option>
                <option value="1" <%=user.sex===1 ? selected="selected" :''%>>Nam</option>
                <option value="2" <%=user.sex===2 ? selected="selected" :''%>>Nữ</option>
            </select>
            <div class="ml-2 invalid-feedback">Vui lòng chọn giới tính!</div>
        </div>
        <div class="form-group">
            <label class="required" for="phone">Điện thoại</label>
            <input value="<%=user.phone %>" type="text" name="phone" class="form-control" id="phone"
                placeholder="Nhập số điện thoại" required />
            <div class="ml-2 invalid-feedback">
                Vui lòng nhập số điện thoại!
            </div>
        </div>
        <div class="form-group">
            <label class="required" for="address">Địa chỉ</label>
            <input value="<%=user.address %>" type="text" name="address" class="form-control" id="address"
                placeholder="Nhập địa chỉ" required />
            <div class="ml-2 invalid-feedback">Vui lòng nhập địa chỉ!</div>
        </div>
        <div class="form-submit text-right">
            <a href="/user" class="btn btn-secondary">Huỷ</a>
            <button type="submit" class="btn btn-primary">Cập nhật</button>
        </div>
    </form>
    <script>
        // Example starter JavaScript for disabling form submissions if there are invalid fields
        (function () {
            'use strict';
            window.addEventListener(
                'load',
                function () {
                    // Fetch all the forms we want to apply custom Bootstrap validation styles to
                    var forms =
                        document.getElementsByClassName('needs-validation');
                    // Loop over them and prevent submission
                    var validation = Array.prototype.filter.call(
                        forms,
                        function (form) {
                            form.addEventListener(
                                'submit',
                                function (event) {
                                    if (form.checkValidity() === false) {
                                        event.preventDefault();
                                        event.stopPropagation();
                                    }
                                    form.classList.add('was-validated');

                                    setTimeout(function () {
                                        $('.close').click();
                                    }, 10000); // 10000 milliseconds = 10 giây
                                },
                                false
                            );
                        }
                    );
                },
                false
            );
        })();
    </script>
</div>